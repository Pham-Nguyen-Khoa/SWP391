extends ../../layouts/default.pug
include ../../mixins/alert.pug
include ../../mixins/mixin-title.pug

block main
    +alert-success("5000")
    +alert-error('5000')
    style.
        // Theme colors
        :root {
            --primary: #2563eb;  // Xanh dương đậm
            --primary-light: #3b82f6;  // Xanh dương nhạt
            --primary-dark: #1d4ed8;   // Xanh dương tối
            --secondary: #0ea5e9;      // Xanh biển
            --accent: #06b6d4;         // Xanh ngọc
            
            // Màu bổ trợ
            --success: #059669;
            --warning: #eab308;
            --danger: #dc2626;
            
            // Màu nền và text
            --bg-light: #f0f9ff;
            --bg-white: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #475569;
            
            // Gradients
            --primary-gradient: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            --secondary-gradient: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            --accent-gradient: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
        }

        // Card styles update
        .card {
            background: var(--bg-white);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(37, 99, 235, 0.1);
        }
        .card-header {
            background: var(--primary-gradient);
            padding: 1rem 2rem;
        }
        .card-header h2 {
            color: var(--bg-white);
            font-weight: 600;
            letter-spacing: 0.5px;
            font-size: 1.5rem;
            margin: 0;
        }

        // Button styles update
        .btn-website-info {
            background: var(--bg-white);
            color: var(--primary);
            border: 2px solid transparent;
            padding: 0.75rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 1rem;
        }
        .btn-website-info:hover {
            background: var(--primary);
            color: var(--bg-white);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.2);
        }

        // Form elements update
        .input-group {
            background: var(--bg-light);
            border-radius: 12px;
        }
        .input-group-text {
            background: var(--bg-light);
            color: var(--primary);
            border: none;
        }
        .form-control {
            background: var(--bg-light);
            border: none;
            color: var(--text-primary);
        }
        .form-control:focus {
            background: var(--bg-white);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        
        // Label styles
        label {
            color: var(--text-primary);
            font-weight: 600;
        }
        label i {
            color: var(--primary);
        }

        // Image upload styles
        .upload-preview {
            width: 90px;
            height: 90px;
            object-fit: cover;
            border-radius: 4px;
            margin-top: 5px;
            border: 1px dashed var(--primary-light);
            padding: 2px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .form-group[upload-image] {
            margin-bottom: 10px;
            padding: 6px;
            background: var(--bg-light);
            border-radius: 6px;
            height: auto;
            text-align: center;
        }

        .form-group[upload-image] label {
            font-size: 0.8rem;
            margin-bottom: 4px;
            min-height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .form-control-file {
            font-size: 0.75rem;
            padding: 2px 0;
            width: 90%;
            margin: 0 auto;
        }

       
        .card::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--accent) 100%);
            border-radius: 26px;
            z-index: -1;
            opacity: 0.1;
        }

        // Hover effects
        .input-group:hover {
            background: var(--bg-white);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.08);
        }

        // Animation
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .card-header {
            background-size: 200% 200%;
            animation: gradientShift 15s ease infinite;
            min-height: 70px;
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-header h2 {
            color: var(--bg-white);
            font-weight: 600;
            letter-spacing: 0.5px;
            font-size: 1.5rem;
            margin: 0;
        }

       
        @media (max-width: 768px) {
            .card {
                border-radius: 20px;
            }
            .card::before {
                border-radius: 22px;
            }
        }

     
        ::-webkit-scrollbar-thumb {
            background: var(--primary-light);
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

      
        .col-md-4 {
            margin-bottom: 10px;
            padding-left: 5px;
            padding-right: 5px;
            display: flex;
            justify-content: center;
        }

        @media (min-width: 768px) {
            .col-md-4 {
                flex: 0 0 33.333333%;
                max-width: 33.333333%;
            }
        }

        // Thêm container cho các ảnh
        .row {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 0 -5px;
        }

    .mixin-title
            h1.mb-0
                i.fas.fa-globe.mr-3
                | Thông tin website
    .block-sider(style="margin-left:180px; margin-right:50px;margin-bottom: 100px;")
        
        .card.shadow-sm(style="border-radius: 20px; border: none; overflow: hidden; box-shadow: 0 1rem 3rem rgba(0,0,0,.175)!important;transform: translateY(-5px);    transition: all 0.3s ease;")
            
            .card-header.bg-gradient-primary.text-white.d-flex.justify-content-between.align-items-center(style="border-top-left-radius: 15px; border-top-right-radius: 15px; border-bottom: 2px solid #474747;")
                h2.mb-0 
                button.btn.btn-light.btn-website-info(type="submit")
                    i.fas.fa-save.mr-2
                    | Cập nhật 
            .card-body.bg-white
                form(action="/admin/setting/general/website-info?_method=PATCH" method="POST" id="form-website-info" enctype="multipart/form-data")
                    .row
                        .col-md-6
                            .form-group
                                label(for="WebsiteName") Tên Website
                                .input-group
                                    .input-group-prepend
                                        span.input-group-text
                                            i.fas.fa-globe
                                    input#WebsiteName.form-control(type="text" name="WebsiteName" value=settingData.WebsiteName required)
                            
                            .form-group
                                label(for="CompanyName") Tên công ty
                                .input-group
                                    .input-group-prepend
                                        span.input-group-text
                                            i.fas.fa-building
                                    input#CompanyName.form-control(type="text" name="CompanyName" value=settingData.CompanyName required)
                            
                            .form-group
                                label(for="PhoneNumber") Hotline
                                .input-group
                                    .input-group-prepend
                                        span.input-group-text
                                            i.fas.fa-phone-alt
                                    input#PhoneNumber.form-control(type="tel" name="PhoneNumber" value=settingData.PhoneNumber required)
                            
                            .form-group
                                label(for="TimeOpen") Thời gian làm việc
                                .input-group
                                    .input-group-prepend
                                        span.input-group-text
                                            i.fa-regular.fa-clock
                                    input#TimeOpen.form-control(type="text" name="TimeOpen" value=settingData.TimeOpen required)
                            
                            .form-group
                                label(for="Email") Email
                                .input-group
                                    .input-group-prepend
                                        span.input-group-text
                                            i.fas.fa-envelope
                                    input#Email.form-control(type="email" name="Email" value=settingData.Email required)
                            
                            .form-group
                                label(for="Address") Địa chỉ
                                .input-group
                                    .input-group-prepend
                                        span.input-group-text
                                            i.fas.fa-map-marker-alt
                                    input#Address.form-control(type="text" name="Address" value=settingData.Address required)
                            
                            .form-group
                                label(for="mapEmbed") Bản đồ (Nhúng iframe)
                                .input-group
                                    .input-group-prepend
                                        span.input-group-text
                                            i.fas.fa-map
                                    textarea#mapEmbed.form-control(name="mapEmbed" rows="3") #{settingData.MapEmbed}
                            
                            .form-group
                                label(for="Copyright") Copyright
                                .input-group
                                    .input-group-prepend
                                        span.input-group-text
                                            i.fas.fa-copyright
                                    input#Copyright.form-control(type="text" name="Copyright" value=settingData.Copyright required)
                        
                        .col-md-6
                            .row 
                                .col-md-4
                                    div(
                                        class="form-group"
                                        upload-image
                                        )
                                        label(for="Logo" class="font-weight-bold") Logo
                                        input(
                                            type="file" 
                                            id="Logo" 
                                            name="Logo"
                                            class="form-control-file"
                                            require
                                            upload-image-input     
                                            )
                                        img(
                                            src=settingData.Logo
                                            upload-image-preview
                                            class="upload-preview"
                                    )
                                .col-md-4
                                    .form-group
                                        div(
                                            class="form-group"
                                            upload-image
                                            )
                                            label(for="BannerHome" class="font-weight-bold") Banner Trang chủ
                                            input(
                                                type="file" 
                                                id="BannerHome" 
                                                name="BannerHome"
                                                class="form-control-file"
                                                require
                                                upload-image-input     
                                                )
                                            img(
                                                src=settingData.BannerHome
                                                upload-image-preview
                                                class="upload-preview"
                                            )
                                .col-md-4
                                    .form-group
                                        div(
                                            class="form-group"
                                        upload-image
                                        )
                                        label(for="BannerCommunity" class="font-weight-bold") Banner Trang Cng Đồng
                                        input(
                                            type="file" 
                                            id="BannerCommunity" 
                                            name="BannerCommunity"
                                            class="form-control-file"
                                            require
                                            upload-image-input     
                                            )
                                        img(
                                            src=settingData.BannerCommunity
                                            upload-image-preview
                                            style=""
                                            class="upload-preview"
                                        )
                                .col-md-4
                                    .form-group
                                        div(
                                            class="form-group"
                                        upload-image
                                        )
                                        label(for="ImageServiceHealthy" class="font-weight-bold") Ảnh Dịch Vụ Khám Cá
                                        input(
                                            type="file" 
                                            id="ImageServiceHealthy" 
                                            name="ImageServiceHealthy"
                                            class="form-control-file"
                                            require
                                            upload-image-input     
                                            )
                                        img(
                                            src=settingData.ImageServiceHealthy
                                            upload-image-preview
                                            class="upload-preview"
                                        )
                                .col-md-4
                                    .form-group
                                        div(
                                            class="form-group"
                                        upload-image
                                        )
                                        label(for="ImageServicePond" class="font-weight-bold") Ảnh Dịch Vụ Cải Thiện Môi Trường 
                                        input(
                                            type="file" 
                                            id="ImageServicePond" 
                                            name="ImageServicePond"
                                            class="form-control-file mt-2"
                                            require
                                            upload-image-input     
                                            )
                                        img(
                                            src=settingData.ImageServicePond
                                            upload-image-preview
                                            class="upload-preview"
                                        )
                                .col-md-4
                                    .form-group
                                        div(
                                            class="form-group"
                                        upload-image
                                        )
                                        label(for="ImageServiceOnline" class="font-weight-bold") Ảnh Dịch Vụ Tư Vấn Online
                                        input(
                                            type="file" 
                                            id="ImageServiceOnline" 
                                            name="ImageServiceOnline"
                                            class="form-control-file"
                                            require
                                            upload-image-input     
                                            )
                                        img(
                                            src=settingData.ImageServiceOnline
                                            upload-image-preview
                                            class="upload-preview"
                                        )
        script.

                    const uploadImage = document.querySelectorAll("[upload-image]");
                        if (uploadImage) {
                        const uploadImageInput = document.querySelectorAll("[upload-image-input]");
                        const uploadImagePreview = document.querySelectorAll("[upload-image-preview]");
                        uploadImageInput.forEach((input, index) => {
                            input.addEventListener("change", (e) => {
                            const file = e.target.files[0];
                            if (file) {
                                uploadImagePreview[index].src = URL.createObjectURL(file);
                            }
                            });
                        });
                    }

                // Edit Website Info 
                    const formWebsiteInfo = document.querySelector("#form-website-info");
                    const btnWebsiteInfo = document.querySelector(".payment-btn");
                    if (formWebsiteInfo) {
                    btnWebsiteInfo.addEventListener("click", (e) => {
                        e.preventDefault();
                        formWebsiteInfo.submit();
                    });
                    }
                    // End Edit Website Info

                // Show Alert Từ JS admin qua
                    const showAlert = document.querySelector("[show-alert]");
                    if (showAlert) {
                    const time = showAlert.getAttribute("data-time");
                    setTimeout(() => {
                        showAlert.classList.add("alert-hidden");
                    }, time);

                    const closeAlert = document.querySelector("[close-alert]");
                    closeAlert.addEventListener("click", () => {
                        showAlert.classList.add("alert-hidden");
                    });
                    }
                // End Show Alert


                // Logout
                    const btnLogout = document.querySelector("[button-logout]");
                    console.log(btnLogout);
                    btnLogout.addEventListener("click", () => {
                    let url = new URL(window.location.href);
                    const check = confirm("Bạn có chắc chắn muốn đăng xuất!");
                    if (check) {
                        window.location.href = "/auth/logout";
                    } else {
                        return;
                    }
                    });

                    // End logout